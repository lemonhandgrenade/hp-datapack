# I tried a lot of different things, but armorstands seem to be the only entities that work with elytra where you can control both axis of rotation, and 
# stacking them all would make it too tall and akward, so I ended up teleporting, which is also kind of akward.


execute as @s[tag=summonCleansweepOne] at @s run summon armor_stand ~ ~ ~ {Team:"noCollision",DisabledSlots:4144959,Silent:1b,NoGravity:1b,Invulnerable:1b,Small:1b,Marker:1b,Invisible:1b,Tags:["broomVisual","broomVisualBeingSpawned","broom"],Passengers:[{id:"minecraft:pig",NoGravity:1b,Silent:1b,Attributes:[{Name:generic.max_health,Base:0}],Invulnerable:1b,NoAI:1b,Saddle:1b,Team:"noCollision",Tags:["broomSaddle","broomSaddleBeingSpawned","broom"],ActiveEffects:[{Id:14b,Amplifier:1b,Duration:19999980,ShowParticles:0b}]}],Pose:{Head:[0f,0f,0.00001f]},ArmorItems:[{},{},{},{id:"minecraft:stick",Count:1b,tag:{CustomModelData:3001,Unbreakable:1b}}]}
execute as @s[tag=summonCleansweepTwo] at @s run summon armor_stand ~ ~ ~ {Team:"noCollision",DisabledSlots:4144959,Silent:1b,NoGravity:1b,Invulnerable:1b,Small:1b,Marker:1b,Invisible:1b,Tags:["broomVisual","broomVisualBeingSpawned","broom"],Passengers:[{id:"minecraft:pig",NoGravity:1b,Silent:1b,Attributes:[{Name:generic.max_health,Base:0}],Invulnerable:1b,NoAI:1b,Saddle:1b,Team:"noCollision",Tags:["broomSaddle","broomSaddleBeingSpawned","broom"],ActiveEffects:[{Id:14b,Amplifier:1b,Duration:19999980,ShowParticles:0b}]}],Pose:{Head:[0f,0f,0.00001f]},ArmorItems:[{},{},{},{id:"minecraft:stick",Count:1b,tag:{CustomModelData:3002,Unbreakable:1b}}]}
execute as @s[tag=summonCleansweepThree] at @s run summon armor_stand ~ ~ ~ {Team:"noCollision",DisabledSlots:4144959,Silent:1b,NoGravity:1b,Invulnerable:1b,Small:1b,Marker:1b,Invisible:1b,Tags:["broomVisual","broomVisualBeingSpawned","broom"],Passengers:[{id:"minecraft:pig",NoGravity:1b,Silent:1b,Attributes:[{Name:generic.max_health,Base:0}],Invulnerable:1b,NoAI:1b,Saddle:1b,Team:"noCollision",Tags:["broomSaddle","broomSaddleBeingSpawned","broom"],ActiveEffects:[{Id:14b,Amplifier:1b,Duration:19999980,ShowParticles:0b}]}],Pose:{Head:[0f,0f,0.00001f]},ArmorItems:[{},{},{},{id:"minecraft:stick",Count:1b,tag:{CustomModelData:3003,Unbreakable:1b}}]}

execute as @s[tag=summonShootingStar] at @s run summon armor_stand ~ ~ ~ {Team:"noCollision",DisabledSlots:4144959,Silent:1b,NoGravity:1b,Invulnerable:1b,Small:1b,Marker:1b,Invisible:1b,Tags:["broomVisual","broomVisualBeingSpawned","broom"],Passengers:[{id:"minecraft:pig",NoGravity:1b,Silent:1b,Attributes:[{Name:generic.max_health,Base:0}],Invulnerable:1b,NoAI:1b,Saddle:1b,Team:"noCollision",Tags:["broomSaddle","broomSaddleBeingSpawned","broom"],ActiveEffects:[{Id:14b,Amplifier:1b,Duration:19999980,ShowParticles:0b}]}],Pose:{Head:[0f,0f,0.00001f]},ArmorItems:[{},{},{},{id:"minecraft:stick",Count:1b,tag:{CustomModelData:3000,Unbreakable:1b}}]}

execute as @s[tag=summonNimbus2000] at @s run summon armor_stand ~ ~ ~ {Team:"noCollision",DisabledSlots:4144959,Silent:1b,NoGravity:1b,Invulnerable:1b,Small:1b,Marker:1b,Invisible:1b,Tags:["broomVisual","broomVisualBeingSpawned","broom"],Passengers:[{id:"minecraft:pig",NoGravity:1b,Silent:1b,Attributes:[{Name:generic.max_health,Base:0}],Invulnerable:1b,NoAI:1b,Saddle:1b,Team:"noCollision",Tags:["broomSaddle","broomSaddleBeingSpawned","broom"],ActiveEffects:[{Id:14b,Amplifier:1b,Duration:19999980,ShowParticles:0b}]}],Pose:{Head:[0f,0f,0.00001f]},ArmorItems:[{},{},{},{id:"minecraft:stick",Count:1b,tag:{CustomModelData:2000,Unbreakable:1b}}]}
execute as @s[tag=summonNimbus2001] at @s run summon armor_stand ~ ~ ~ {Team:"noCollision",DisabledSlots:4144959,Silent:1b,NoGravity:1b,Invulnerable:1b,Small:1b,Marker:1b,Invisible:1b,Tags:["broomVisual","broomVisualBeingSpawned","broom"],Passengers:[{id:"minecraft:pig",NoGravity:1b,Silent:1b,Attributes:[{Name:generic.max_health,Base:0}],Invulnerable:1b,NoAI:1b,Saddle:1b,Team:"noCollision",Tags:["broomSaddle","broomSaddleBeingSpawned","broom"],ActiveEffects:[{Id:14b,Amplifier:1b,Duration:19999980,ShowParticles:0b}]}],Pose:{Head:[0f,0f,0.00001f]},ArmorItems:[{},{},{},{id:"minecraft:stick",Count:1b,tag:{CustomModelData:2001,Unbreakable:1b}}]}

execute as @s[tag=summonFirebolt] at @s run summon armor_stand ~ ~ ~ {Team:"noCollision",DisabledSlots:4144959,Silent:1b,NoGravity:1b,Invulnerable:1b,Small:1b,Marker:1b,Invisible:1b,Tags:["broomVisual","broomVisualBeingSpawned","broom"],Passengers:[{id:"minecraft:pig",NoGravity:1b,Silent:1b,Attributes:[{Name:generic.max_health,Base:0}],Invulnerable:1b,NoAI:1b,Saddle:1b,Team:"noCollision",Tags:["broomSaddle","broomSaddleBeingSpawned","broom"],ActiveEffects:[{Id:14b,Amplifier:1b,Duration:19999980,ShowParticles:0b}]}],Pose:{Head:[0f,0f,0.00001f]},ArmorItems:[{},{},{},{id:"minecraft:stick",Count:1b,tag:{CustomModelData:4000,Unbreakable:1b}}]}
#execute as @s[tag=summonNimbus2000] at @s run summon armor_stand ~ ~ ~ {Team:"noCollision",Silent:1b,NoGravity:1b,Invulnerable:1b,Small:1b,Marker:1b,Invisible:1b,Tags:["broomVisual","glowable","restorable","broomVisualBeingSpawned"],Passengers:[{id:"minecraft:pig",NoGravity:1b,Silent:1b,Invulnerable:1b,NoAI:1b,Saddle:1b,Tags:["broomSaddle","broomSaddleBeingSpawned"],ActiveEffects:[{Id:14b,Amplifier:1b,Duration:19999980,ShowParticles:0b}]}],Pose:{Head:[0f,0f,0.00001f]},ArmorItems:[{},{},{},{id:"minecraft:wooden_sword",Count:1b,tag:{Unbreakable:1b,Damage:35}}]}
#execute as @s[tag=summonNimbus2001] at @s run summon armor_stand ~ ~ ~ {Team:"noCollision",Silent:1b,NoGravity:1b,Invulnerable:1b,Small:1b,Marker:1b,Invisible:1b,Tags:["broomVisual","glowable","restorable","broomVisualBeingSpawned"],Passengers:[{id:"minecraft:pig",NoGravity:1b,Silent:1b,Invulnerable:1b,NoAI:1b,Saddle:1b,Tags:["broomSaddle","broomSaddleBeingSpawned"],ActiveEffects:[{Id:14b,Amplifier:1b,Duration:19999980,ShowParticles:0b}]}],Pose:{Head:[0f,0f,0.00001f]},ArmorItems:[{},{},{},{id:"minecraft:wooden_sword",Count:1b,tag:{Unbreakable:1b,Damage:34}}]}
#execute as @s[tag=summonFirebolt] at @s run summon armor_stand ~ ~ ~ {Team:"noCollision",Silent:1b,NoGravity:1b,Invulnerable:1b,Small:1b,Marker:1b,Invisible:1b,Tags:["broomVisual","glowable","restorable","broomVisualBeingSpawned"],Passengers:[{id:"minecraft:pig",NoGravity:1b,Silent:1b,Invulnerable:1b,NoAI:1b,Saddle:1b,Tags:["broomSaddle","broomSaddleBeingSpawned"],ActiveEffects:[{Id:14b,Amplifier:1b,Duration:19999980,ShowParticles:0b}]}],Pose:{Head:[0f,0f,0.00001f]},ArmorItems:[{},{},{},{id:"minecraft:wooden_sword",Count:1b,tag:{Unbreakable:1b,Damage:33}}]}
execute at @s run summon armor_stand ~ ~ ~ {Tags:["spellEntity","broomElytra","new","broom"],DisabledSlots:4144959,ArmorItems:[{},{},{id:"minecraft:elytra",Count:1b},{}],Invisible:1b,Silent:1b}
execute if entity @s[tag=summonCleansweepOne] run scoreboard players set @e[type=armor_stand,tag=new] broomType 4
execute if entity @s[tag=summonCleansweepTwo] run scoreboard players set @e[type=armor_stand,tag=new] broomType 5
execute if entity @s[tag=summonCleansweepThree] run scoreboard players set @e[type=armor_stand,tag=new] broomType 6
execute if entity @s[tag=summonNimbus2000] run scoreboard players set @e[type=armor_stand,tag=new] broomType 23
execute if entity @s[tag=summonNimbus2001] run scoreboard players set @e[type=armor_stand,tag=new] broomType 24
execute if entity @s[tag=summonShootingStar] run scoreboard players set @e[type=armor_stand,tag=new] broomType 26
execute if entity @s[tag=summonFirebolt] run scoreboard players set @e[type=armor_stand,tag=new] broomType 16
scoreboard players operation @e[type=armor_stand,tag=new] broomID = global broomID
scoreboard players operation @e[type=armor_stand,tag=broomVisualBeingSpawned] broomID = global broomID
scoreboard players operation @e[type=pig,tag=broomSaddleBeingSpawned] broomID = global broomID
scoreboard players operation @s broomID = global broomID

#execute as @s[tag=summonNimbus2000] at @s run scoreboard players set @e[tag=new] broomType 23
#execute as @s[tag=summonNimbus2001] at @s run scoreboard players set @e[tag=new] broomType 24
#execute as @s[tag=summonShootingStar] at @s run scoreboard players set @e[tag=new] broomType 26
#execute as @s[tag=summonFirebolt] at @s run scoreboard players set @e[tag=new] broomType 16

#execute as @s[tag=summonNimbus2001] at @s run scoreboard players set @e[tag=new] broomType 3
#execute as @s[tag=summonFirebolt] at @s run scoreboard players set @e[tag=new] broomType 4

scoreboard players add global broomID 1
tag @e[tag=broomVisualBeingSpawned] remove broomVisualBeingSpawned
tag @e[tag=new] remove new
tag @e[tag=broomSaddleBeingSpawned] remove broomSaddleBeingSpawned

#tag @s remove summonNimbus2000
#tag @s remove summonNimbus2000
#tag @s remove summonNimbus2001
#tag @s remove summonFirebolt

kill @s